(function(k){var c=window.AmazonUIPageJS||window.P,m=c._namespace||c.attributeErrors,h=m?m("P2PAUIAssets@Logging",""):c;h.guardFatal?h.guardFatal(k)(h,window):h.execute(function(){k(h,window)})})(function(k,c,m){(function(){"undefined"===typeof c.clickLoggerJSRegistered&&(c.clickLoggerJSRegistered=!0,k.when("A","apay-rewards-drax-sushi-client","reward-ad-logging-constants","click-event-publish","clickstream-logger").register("reward-ad-click-logger",function(h,b,d,a,e){var g=h.$;h=0===document.domain.indexOf("www.amazon");
var l=new b(c,d.REWARD_AD_CLICK_SUSHI_ENDPOINT[h?"prod":"gamma"]),f=new e,n={isImmediateFlushRequired:function(a){return a!==d.COLLECT_CLICK_TYPE||a!==d.COPY_CODE_CLICK_TYPE},validateLogEntry:function(a){return a&&a.rewardAdId&&a.placementId&&a.rewardStatus&&a.clickType},updateRewardAdEntries:function(a,f){var b=g(a).attr(d.REWARD_ID_KEY);a=g(a).attr(d.MODULE_IDENTIFIER_KEY)+"#"+b;if(b=rewardAdLogEntryMap[d.FACEOUT_REWARD_DATA_KEY].get(a))b.rewardStatus=f,rewardAdLogEntryMap[d.FACEOUT_REWARD_DATA_KEY].set(a,
b)},buildRewardAdClickEntry:function(a,f,b){var e=g(a).attr(d.REWARD_ID_KEY),c=g(a).attr(d.MODULE_IDENTIFIER_KEY);a=c+"#"+e;c=rewardAdLogEntryMap[d.LOGGING_METADATA_KEY].get(c);return(a=rewardAdLogEntryMap[d.FACEOUT_REWARD_DATA_KEY].get(a))&&c?{rewardAdId:e,placementId:c.placementId,requestId:b,creativeId:c.creativeId,sessionId:c.sessionId,customerId:c.customerId,rewardStatus:a.rewardStatus,rewardPlacement:parseInt(a.rewardPlacement,10)+1,clickType:f}:null},buildCustomerEventLogEntry:function(a,f,
b,e){a=g(a).attr(d.REWARD_ID_KEY);return{actionType:f,eventOwner:d.PRODUCER_ID,eventType:b,eventSubType:e,productId:a}},emitMetricsForRewardAdCTAClick:function(a){var f=document.getElementsByClassName("unlocked-rewardAd-cta-before-collect");0!==f.length?(f=f[0].innerText.trim().replace(" ","_"),f===d.ACTIVATE_PRIME_CLICK_TYPE&&this.updateRewardAdEntries(a,d.GRANTED_REWARD_AD_STATUS),n.log(a,f)):n.log(a,d.COLLECT_CLICK_TYPE)},log:function(b,e){var c;c="";for(var g=20;0<g;--g)c+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(36*
Math.random())];g=this.buildRewardAdClickEntry(b,e,c);this.validateLogEntry(g)&&(this.isImmediateFlushRequired(e)?l.processEvent(g,{n:1},!0):l.processEvent(g,{n:1},!1),a.publishClickEvent(g),e===d.COLLECT_CLICK_TYPE&&(this.updateRewardAdEntries(b,d.CLIPPED_REWARDAD_STATUS),f.log(b,c)))}};return n}))})();(function(){"undefined"===typeof c.sushiClientJSRegistered&&(c.sushiClientJSRegistered=!0,k.register("apay-rewards-drax-sushi-client",function(){function c(){this.KEYS_WITH_UNIQUE_VALUE=["messageId",
"timestamp"];this.eventsQueue=[];this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.dictionaryIndex=0;var b=this,d,a,e=function(a){b.eventsDictionary[a]="#"+b.dictionaryIndex++;b.reverseEventsDictionary[b.eventsDictionary[a]]=a;return b.eventsDictionary[a]},g=function(a){if(a)switch(typeof a){case "number":return!(isNaN(a)||Infinity===a)&&a.toString().length>("#"+b.dictionaryIndex).length;case "boolean":break;case "string":return a.length>("#"+b.dictionaryIndex).length;
default:return!0}return!1},l=function(f){if(g(f)){if(f instanceof Array)return a(f);if(f instanceof Function)return b.eventsDictionary[f]?b.eventsDictionary[f]:e(f);if(f instanceof Object)return d(f)}return f};d=function(a){var d={},c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[b.eventsDictionary[c]?b.eventsDictionary[c]:e(c)]=-1===b.KEYS_WITH_UNIQUE_VALUE.indexOf(c)?l(a[c]):a[c]);return d};a=function(a){for(var b=[],c=a.length,d=0;d<c;d++)b[d]=l(a[d]);return b};return{reset:function(){b.eventsQueue=
[];b.eventsDictionary={};b.reverseEventsDictionary={};b.dictionaryIndex=0},pushEvent:function(a){return b.eventsQueue.push(a)},getEventsQueueLength:function(){return b.eventsQueue.length},compressEvent:l,buildPOSTObject:function(){return JSON.stringify({cs:{dct:b.reverseEventsDictionary},events:b.eventsQueue})}}}return function(b,d){this.MAX_NO_EVENTS_PER_BATCH=500;this.MAX_BATCH_SIZE=524288;this.HIGH_PRIORITY_FLUSH_INTERVAL=1E3;this.LOW_PRIORITY_FLUSH_INTERVAL=3E3;this.compressor=new c;this.callsMade=
this.batchSize=0;this.highPriorityTimer=this.lowPriorityTimer=null;this.window=b;this.endpoint=d;this.dummyException="";var a=this;this.transportationClient=function(){var f=function(){},d=function(){var d=function(){var b=new a.window.XMLHttpRequest;if(!("withCredentials"in b))throw this.dummyException;return b};return{send:function(c,e){if(e&&c){var g;a.window.XDomainRequest?(g=new a.window.XDomainRequest,g.onerror=f,g.ontimeout=f,g.onprogress=f,g.onload=f,g.timeout=0):g=b.XMLHttpRequest?d():null;
if(!g)throw this.dummyException;g.open("POST",c,!0);g.setRequestHeader&&g.setRequestHeader("Content-type","text/plain");g.send(e)}},isSupported:!0}}(),c=function(){return{send:function(b,f){if(b&&f&&!a.window.navigator.sendBeacon(b,f))throw"";},isSupported:!!a.window.navigator.sendBeacon&&!(a.window.cordova&&a.window.cordova.platformId&&"ios"===a.window.cordova.platformId)}}();return{ajaxClient:d,beaconClient:c}}();var e=function(){for(var b=0;b<arguments.length;b++){var c=arguments[b];try{var d;
if(null===a.endpoint||""===a.endpoint)throw a.dummyException;if(c.isSupported){var e=a.compressor.buildPOSTObject();d=c.send(a.endpoint,e)}else throw a.dummyException;return d}catch(g){}}return null},g=function(){a.compressor.getEventsQueueLength()&&(e(a.transportationClient.beaconClient||{},a.transportationClient.ajaxClient||{}),a.compressor.reset(),a.batchSize=0,a.lowPriorityTimer=null,a.highPriorityTimer=null,a.callsMade=0)},l=function(){var a=new Date,b=function(a){return 10>a?"0"+a:a};return Date.prototype.toISOString?
a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"};return{processEvent:function(b,c,d){this.options=c||{};c=this.options;b.timestamp=l();var e;e=Date.now?Date.now():+new Date;e=Math.random().toString().substring(2,12)+"-"+e+"-"+a.callsMade;b.messageId=e;(e=JSON.stringify(b))?(e=e.length,(a.compressor.getEventsQueueLength()===a.MAX_NO_EVENTS_PER_BATCH||
a.batchSize+e>a.MAX_BATCH_SIZE)&&a.flush(),a.batchSize+=e,b={data:a.compressor.compressEvent(b)},a.compressor.pushEvent(b),(c||{}).n?0===a.highPriorityFlushInterval?g():a.highPriorityTimer||(a.highPriorityTimer=a.window.setTimeout(g,a.HIGH_PRIORITY_FLUSH_INTERVAL,a)):a.lowPriorityTimer||(a.lowPriorityTimer=a.window.setTimeout(g,a.LOW_PRIORITY_FLUSH_INTERVAL,a)),b=!0):b=!1;b?(a.callsMade++,d&&g()):console.log("Invalid Sushi Call");return b}}}}))})();(function(){"undefined"===typeof c.clickEventJSRegistered&&
(c.clickEventJSRegistered=!0,k.when("A","ready").register("click-event-publish",function(c){function b(a){return"string"===typeof a&&!a.trim()||"undefined"===typeof a||null===a}var d=c.$;return{publishClickEvent:function(a){var e=d('[name\x3d"p2p-xsrf-token"]');b(a.timestamp)||b(a.clickType)||b(e.val())||b(a.customerId)||b(a.rewardAdId)||c.ajax("/h/rewards/click/publish",{method:"post",params:{rewardPlacement:a.rewardPlacement,timestamp:a.timestamp,placementId:a.placementId,clickType:a.clickType,
rewardAdId:a.rewardAdId,creativeId:a.creativeId,customerId:a.customerId,xsrfTokenField:e.val()}})}}}))})();(function(){"undefined"===typeof c.loggingConstJSRegistered&&(c.loggingConstJSRegistered=!0,k.register("reward-ad-logging-constants",function(){return{REWARD_AD_CLICK_SUSHI_ENDPOINT:{gamma:"https://unagi-eu.amazon.com/1/events/com.amazon.P2PRenderingStack.EU.Gamma.rewardAdClickLog",prod:"https://unagi-eu.amazon.com/1/events/com.amazon.P2PRenderingStack.EU.Prod.rewardAdClickLog"},REWARD_AD_HIT_SUSHI_ENDPOINT:{gamma:"https://unagi-eu.amazon.com/1/events/com.amazon.P2PRenderingStack.EU.Gamma.rewardAdHitLog",
prod:"https://unagi-eu.amazon.com/1/events/com.amazon.P2PRenderingStack.EU.Prod.rewardAdHitLog"},COLLECT_CLICK_TYPE:"COLLECT",REDEMPTION_CLICK_TYPE:"REDEMPTION_CTA",UNLOCK_REDEMPTION_CLICK_TYPE:"UNLOCK_REDEMPTION_CTA",JOIN_PRIME_CLICK_TYPE:"JOIN_PRIME",EXPLORE_PRIME_CLICK_TYPE:"EXPLORE_PRIME",VERIFY_MOBILE_CLICK_TYPE:"VERIFY_MOBILE",TERMS_AND_CONDITION_CLICK_TYPE:"T\x26C",DETAILS_CLICK_TYPE:"DETAILS",CLIPPED_REWARDAD_STATUS:"CLIPPED",GRANTED_REWARD_AD_STATUS:"GRANTED",ACTIVATE_PRIME_CLICK_TYPE:"Activate_Prime",
UNLOCK_NOW_REWARDAD_TYPE:"UNLOCK_NOW",VIEW_UNLOCKED_TYPE:"UNLOCK_YOUR_REWARDS",SIGN_IN_TO_COLLECT:"SIGN_IN_TO_COLLECT",COPY_CODE_CLICK_TYPE:"COPY_CODE",CLAIM_CODE_CLICK_TYPE:"CLAIM_CODE_CTA",ACTION_TYPES:{DISCOVERY:"DISCOVERY",INTENTION:"INTENTION",TRANSACTION:"TRANSACTION",CONSUMPTION:"CONSUMPTION"},UI_ACTIONS:{INITIAL_PAGE_LOAD:"InitialPageLoad",PAGE_UPDATE:"PageUpdate",OVERLAY:"Overlay"},PAGE_FUNCTIONS:{ACCOUNT:"Account",AUTHENTICATION:"Authentication",CART:"Cart",CHECKOUT:"Checkout",DETAIL:"Detail",
EXPLORATION:"Exploration",GATEWAY:"Gateway",LIBRARY:"Library",LIST:"List",OFFER_LISTING:"OfferListing",PRODUCT_INFO:"ProductInfo",PROGRAM:"Program",SIGNUP:"SignUp",SUPPORT:"Support",UPSELL:"Upsell"},SCHEME:{HTTP:"HTTP",HTTPS:"HTTPS"},CUSTOMER_EVENT_SCHEMA_ID:"clickstream.CustomerEvent.4",HTTP_REQUEST_SCHEMA_ID:"clickstream.HttpRequest.2",BASIC_PAGE_SCHEMA_ID:"clickstream.BasicPage.3",PRODUCER_ID:"apay_rewards_drax",CLICK_EVENT_TYPE:"REWARD_CLICKED",REWARD_ID_KEY:"data-coupon-id",LOGGING_METADATA_KEY:"loggingMetadata",
MODULE_IDENTIFIER_KEY:"data-module-identifier",FACEOUT_REWARD_DATA_KEY:"faceoutRewardData"}}))})();(function(){"undefined"===typeof c.clickLogHandlerJSRegistered&&(c.clickLogHandlerJSRegistered=!0,k.when("A","reward-ad-click-logger","reward-ad-logging-constants","rewards-intent-handler","load").register("reward-ad-click-log-handler",function(c,b,d,a){var e=c.$;e(document).delegate(".redeem-btn a","click",function(){b.log(this,d.REDEMPTION_CLICK_TYPE);a.registerIntent(this)});e(document).delegate(".membership-granted-btn a",
"click",function(){b.log(this,d.EXPLORE_PRIME_CLICK_TYPE)});e(document).delegate(".unlock-redeem-btn a","click",function(){b.log(this,d.UNLOCK_REDEMPTION_CLICK_TYPE);a.registerIntent(this)});e(document).delegate(".reward-ad-image-click-dp","click",function(){b.log(this,d.DETAILS_CLICK_TYPE)});e(document).delegate(".reward-ad-image-click","click",function(){b.log(this,d.REDEMPTION_CLICK_TYPE);a.registerIntent(this)});e(document).delegate(".coupon-join-prime-btn","click",function(){b.log(this,d.JOIN_PRIME_CLICK_TYPE)});
e(document).delegate(".mobile-verify-button a","click",function(){b.log(this,d.VERIFY_MOBILE_CLICK_TYPE)});e(document).delegate(".image-wrapper_time_link","click",function(){b.log(this,d.TERMS_AND_CONDITION_CLICK_TYPE)});e(document).delegate(".reward-ad-detail-link","click",function(){b.log(this,d.DETAILS_CLICK_TYPE)});e(document).delegate(".hook-redeem-btn","click",function(){b.log(this,d.REDEMPTION_CLICK_TYPE);a.registerIntent(this)});e(document).delegate(".lock-button span button","click",function(){b.log(this,
d.UNLOCK_NOW_REWARDAD_TYPE)});e(document).delegate(".lock-button span a","click",function(){b.log(this,d.UNLOCK_NOW_REWARDAD_TYPE)});e(document).delegate(".unlock-order-page a","click",function(){b.log(this,d.VIEW_UNLOCKED_TYPE)});e(document).delegate(".coupon-sign-in-button a","click",function(){b.log(this,d.SIGN_IN_TO_COLLECT)});k.register("sc-reveal-reward-ad-click-log-event-binder",function(){return{bindEvent:function(a){var c=a.getElementsByClassName("coupon-cta-issued")[0],f=a.getElementsByClassName("reward-ad-image-click-dp");
a=a.getElementsByClassName("reward-ad-detail-link");var h=e(c).find(".redeem-btn a"),k=e(c).find(".unlock-redeem-btn a"),m=e(c).find(".membership-granted-btn a"),c=e(c).find(".coupon-join-prime-btn");this.bindClickEventIfRequiredWithSCCTAIssuedElementSelector(h,d.REDEMPTION_CLICK_TYPE,!0);this.bindClickEventIfRequiredWithSCCTAIssuedElementSelector(k,d.UNLOCK_REDEMPTION_CLICK_TYPE,!0);this.bindClickEventIfRequiredWithSCCTAIssuedElementSelector(m,d.EXPLORE_PRIME_CLICK_TYPE,!1);this.bindClickEventIfRequiredWithSCCTAIssuedElementSelector(c,
d.JOIN_PRIME_CLICK_TYPE,!1);this.bindClickEventIfRequiredWithSCCTAIssuedElementSelector(a,d.DETAILS_CLICK_TYPE,!1);f.length&&Array.from(f).forEach(function(a){a.addEventListener("click",function(){b.log(a,d.DETAILS_CLICK_TYPE)})})},bindClickEventIfRequiredWithSCCTAIssuedElementSelector:function(c,d,e){c.length&&c[0].addEventListener("click",function(){b.log(this,d);e&&a.registerIntent(this)})}}})}))})();(function(){"undefined"===typeof c.hitLoggerJSRegistered&&(c.hitLoggerJSRegistered=!0,k.when("A",
"apay-rewards-drax-sushi-client","reward-ad-logging-constants").register("reward-ad-hit-logger",function(h,b,d){var a=h.$;h=0===document.domain.indexOf("www.amazon");var e=new b(c,d.REWARD_AD_HIT_SUSHI_ENDPOINT[h?"prod":"gamma"]);return{buildRewardAdHitEntry:function(a,b,c){return b&&c?{rewardAdId:a,placementId:c.placementId,requestId:c.requestId,creativeId:c.creativeId,sessionId:c.sessionId,customerId:c.customerId,rewardAdStatus:b.rewardStatus,rewardAdPlacement:parseInt(b.rewardPlacement,10)+1}:
null},log:function(b){var c=a(b).attr("data-reward-ad-id"),d=a(b).attr("data-module-identifier");b=d+"#"+c;d=rewardAdLogEntryMap.loggingMetadata.get(d);b=rewardAdLogEntryMap.faceoutRewardData.get(b);(c=this.buildRewardAdHitEntry(c,b,d))&&e.processEvent(c,{n:0},!1)}}}))})();(function(){"undefined"===typeof c.hitLogHandlerJSRegistered&&(c.hitLogHandlerJSRegistered=!0,k.when("reward-ad-hit-logger","apay-rewards-drax-intersection-observer","load").register("reward-ad-hit-log-handler",function(h){var b,
d=[],a=function(a,b){a.forEach(function(a){a.isIntersecting&&(h.log(a.target),b.unobserve(a.target))})};(function(){var d={threshold:[0,.5]};b||(b=new c.IntersectionObserver(a,d))})();return{createObserver:function(){Array.from(document.querySelectorAll(".reward-ad-log-entry")).filter(function(a){return!d.includes(a)}).forEach(function(a){b.observe(a);d.push(a)})}}}))})();(function(){"undefined"===typeof c.intersectionObsvJSRegistered&&(c.intersectionObsvJSRegistered=!0,k.register("apay-rewards-drax-intersection-observer",
function(){"IntersectionObserver"in c&&"IntersectionObserverEntry"in c&&"intersectionRatio"in c.IntersectionObserverEntry.prototype?"isIntersecting"in c.IntersectionObserverEntry.prototype||Object.defineProperty(c.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}}):k.load.js("https://m.media-amazon.com/images/G/31/AmazonPay/DRAX/JS/IntersectionObserverPolyfill._CB405116469_.js")}))})();(function(){"undefined"===typeof c.clickstreamLoggerJSRegistered&&
(c.clickstreamLoggerJSRegistered=!0,k.when("A","reward-ad-logging-constants").register("clickstream-logger",function(h,b){var d=h.$;return function(){return{log:function(a,e){var g=d(a).attr(b.REWARD_ID_KEY);a=d(a).attr(b.MODULE_IDENTIFIER_KEY);var h=rewardAdLogEntryMap[b.LOGGING_METADATA_KEY].get(a);a=h.sessionId;var f=parseInt(h.decryptedCustomerId,10),g={actionType:b.ACTION_TYPES.INTENTION,eventOwner:b.PRODUCER_ID,eventType:b.CLICK_EVENT_TYPE,eventSubType:b.COLLECT_CLICK_TYPE,productId:g,requestId:e,
customerId:f},k={uiAction:b.UI_ACTIONS.PAGE_UPDATE,pageFunction:b.PAGE_FUNCTIONS.EXPLORATION,requestId:e,producerId:b.PRODUCER_ID,schemaId:b.BASIC_PAGE_SCHEMA_ID,sessionId:a,marketplaceId:44571,customerId:f,directedCustomerId:null,pageType:null,subPageType:null,storeName:null,browseNodeId:null},m=b.SCHEME.HTTPS,h=h.remoteAddress;e={startTime:Date.now().toString(10),rawUserAgent:navigator.userAgent,scheme:m,domain:"www.amazon.in",hostname:"",requestId:e,producerId:b.PRODUCER_ID,schemaId:b.HTTP_REQUEST_SCHEMA_ID,
sessionId:a,marketplaceId:44571,customerId:f,directedCustomerId:null,remoteAddress:h,protocol:null,path:null,queryString:null,referringUrl:null,renderedLanguageCode:null};c.ue&&c.ue.event?(c.ue.event(k,b.PRODUCER_ID,b.BASIC_PAGE_SCHEMA_ID,{ssd:1}),c.ue.event(e,b.PRODUCER_ID,b.HTTP_REQUEST_SCHEMA_ID,{ssd:1}),c.ue.event(g,b.PRODUCER_ID,b.CUSTOMER_EVENT_SCHEMA_ID)):console.warn("window ue function is not present. Skipping logging the DSI event")}}}}))})();(function(){"undefined"===typeof c.intentJSRegistered&&
(c.intentJSRegistered=!0,k.when("A","reward-ad-logging-constants","load").register("rewards-intent-handler",function(c,b){var d=c.$,a=d('[name\x3d"p2p-xsrf-token"]');return{registerIntent:function(e){e=d(e).attr(b.REWARD_ID_KEY);a.val()&&e&&c.ajax("/h/rewards/intent/register",{method:"post",params:{rewardAdId:e,xsrfTokenField:a.val()}})}}}))})()});